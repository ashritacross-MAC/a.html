<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Student Finance Tool — Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="dashboard.html" />
  <style>
    :root{
      --bg1:#e6f7ff; --bg2:#e0f2ff; --accent:#0ea5a4; --card:#ffffffcc;
      --muted:#6b7280; --glass: rgba(255,255,255,0.6);
    }
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    body{
      background: radial-gradient(1200px 600px at 10% 10%, rgba(18,137,167,0.12), transparent 10%),
                  radial-gradient(1000px 500px at 90% 90%, rgba(5,150,105,0.06), transparent 10%),
                  linear-gradient(180deg,#e6f7ff 0%, #f7fdff 100%);
      display:flex; align-items:center; justify-content:center;
      padding:20px;
    }
    .card{
      width:980px; max-width:100%; border-radius:18px; padding:28px;
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.75));
      box-shadow: 0 10px 30px rgba(3,27,45,0.08); display:flex; gap:20px; align-items:stretch;
      backdrop-filter: blur(6px);
    }
    .left{flex:1; padding:18px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));}
    .right{width:420px; padding:18px; border-radius:12px; background:var(--card); box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);}
    h1{margin:0;color:#05445E;font-size:24px;}
    p.lead{color:var(--muted); margin-top:8px;}
    .field{display:flex;flex-direction:column;margin-top:10px;}
    input, select, textarea{padding:10px;border-radius:8px;border:1px solid #e6eef0;background:#fff; font-size:14px;}
    label{font-size:13px;color:#0b4b55;margin-bottom:6px;font-weight:600;}
    .row{display:flex;gap:10px;}
    .btn{
      display:inline-block;padding:10px 14px;background:linear-gradient(90deg,var(--accent),#06b6d4);color:white;border-radius:10px;border:0;
      font-weight:700;cursor:pointer;margin-top:12px;box-shadow:0 6px 18px rgba(6,182,212,0.18);
    }
    .small{font-size:13px;color:var(--muted);margin-top:8px;}
    .muted-box{background:rgba(5,150,105,0.06);padding:10px;border-radius:10px;color:#065f60;font-weight:600;margin-top:8px;}
    .login-box{display:flex;flex-direction:column;gap:10px;}
    .help{font-size:13px;color:#0b7285;}
    footer{margin-top:10px;font-size:12px;color:var(--muted);}
    /* responsive */
    @media (max-width:900px){.card{flex-direction:column}.right{width:100%}}
  </style>
</head>
<body>
  <div class="card" role="main">
    <div class="left">
      <h1>Student Finance Tool</h1>
      <p class="lead">Manage expenses • set budgets • get smart predictions • stay financially confident.</p>

      <div style="margin-top:16px;">
        <div class="muted-box">✨ Fun AI Assistant: "Aqua" — your finance buddy will greet you on the dashboard with helpful tips.</div>
      </div>

      <section style="margin-top:18px;">
        <h3 style="margin:0;color:#05445E">Create your student profile</h3>
        <p class="small">This is stored locally on your device (no server). Use College Code + Phone to log in.</p>

        <form id="signupForm" style="margin-top:12px;">
          <div class="row">
            <div style="flex:1;" class="field">
              <label>Full name</label>
              <input name="name" required placeholder="e.g., Priya Sharma">
            </div>
            <div style="width:140px;" class="field">
              <label>College Code</label>
              <input name="collegeCode" required placeholder="e.g., COL123">
            </div>
          </div>

          <div class="row">
            <div style="flex:1;" class="field">
              <label>Phone</label>
              <input name="phone" required placeholder="+91 98XXXXXXXX">
            </div>
            <div style="width:160px;" class="field">
              <label>Gender</label>
              <select name="gender">
                <option value="Prefer not to say">Prefer not to say</option>
                <option>Female</option><option>Male</option><option>Other</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div style="width:140px;" class="field">
              <label>Age</label><input name="age" type="number" min="15" max="80" required>
            </div>
            <div style="flex:1;" class="field">
              <label>DOB</label><input name="dob" type="date" required>
            </div>
          </div>

          <div class="field">
            <label>Address</label><textarea name="address" rows="2" placeholder="City, State"></textarea>
          </div>

          <div class="field">
            <label>Financial Goal (e.g., Save ₹50,000 in 1 year)</label>
            <input name="goal" placeholder="Save ₹50,000 in 12 months">
          </div>

          <button class="btn" type="submit">Create Profile & Go to Dashboard →</button>
        </form>
      </section>

      <footer>
        <div>Built with a calming water tone theme • Local (no server) • Charts powered by Chart.js</div>
      </footer>
    </div>

    <div class="right">
      <h2 style="margin:0;color:#044B50">Quick Login</h2>
      <p class="small">Already have a profile? Login with your <strong>College Code</strong> and <strong>Phone</strong>.</p>

      <div class="login-box" style="margin-top:10px;">
        <input id="loginCollege" placeholder="College Code">
        <input id="loginPhone" placeholder="Phone">
        <button id="loginBtn" class="btn">Login</button>
        <div id="loginMsg" class="small help"></div>
      </div>

      <hr style="margin:14px 0;border:none;border-top:1px dashed #e9f3f4;">

      <div style="margin-top:8px;">
        <h3 style="margin:0;color:#05445E">Why use this?</h3>
        <p class="small">• Track daily expenses • Auto-categorize • Predict next month's spend • Budget alerts</p>
        <p class="small">Everything stays on your device. You can export CSV later from the dashboard.</p>
      </div>

    </div>
  </div>

<script>
  // signup -> save profile to localStorage.users keyed by collegeCode+phone
  const signupForm = document.getElementById('signupForm');
  signupForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const f = new FormData(signupForm);
    const user = {
      name: f.get('name'),
      collegeCode: f.get('collegeCode'),
      phone: f.get('phone'),
      gender: f.get('gender'),
      age: f.get('age'),
      dob: f.get('dob'),
      address: f.get('address'),
      goal: f.get('goal'),
      createdAt: new Date().toISOString()
    };
    const key = `${user.collegeCode}__${user.phone}`;
    // save user and set as current
    const users = JSON.parse(localStorage.getItem('sf_users') || '{}');
    users[key] = user;
    localStorage.setItem('sf_users', JSON.stringify(users));
    localStorage.setItem('sf_current', key);
    // initialize empty transactions for this user if none
    if (!localStorage.getItem('sf_tx_' + key)) localStorage.setItem('sf_tx_' + key, JSON.stringify([]));
    // go to dashboard
    window.location.href = 'dashboard.html';
  });

  // login
  document.getElementById('loginBtn').addEventListener('click', () => {
    const code = document.getElementById('loginCollege').value.trim();
    const phone = document.getElementById('loginPhone').value.trim();
    if (!code || !phone) { document.getElementById('loginMsg').innerText = 'Enter both fields.'; return; }
    const key = `${code}__${phone}`;
    const users = JSON.parse(localStorage.getItem('sf_users') || '{}');
    if (users[key]) {
      localStorage.setItem('sf_current', key);
      window.location.href = 'dashboard.html';
    } else {
      document.getElementById('loginMsg').innerText = 'No profile found. Please sign up first.';
    }
  });
</script>
</body>
</html>
